<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">

    <!----------------------------------- Bootstrap & CSS Imports -------------------------------------->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.8.0/firebase-ui-auth.css" />

    <!---------------------------------------  Our CSS sheets ------------------------------------------>
    <link rel="stylesheet" href="../css/colourPalette1.css" />

    <!----------------------------------------- Our Favicon ------------------------------------------>
    <link rel="shortcut icon" type="image/png" href="../img/PNGfavicon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Help</title>
</head>

<body>


    <!------------------------------------------ Top Header -------------------------------------------->
    <nav class="navbar brand-custom">
        <a id="nav-top" class="navbar-brand" href="overview.html">
            <img class="logo" src="../img/leafMain.svg" alt="logo not displaying properly">
        </a>

        <a href="../index.html" type="button" style="display: inline;" class="btn btn-success btn-lg top-buttons"
                id="logout">
                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor"
                    class="bi bi-box-arrow-left" viewBox="0 0 16 16">
                    <path fill-rule="evenodd"
                        d="M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0v2z" />
                    <path fill-rule="evenodd"
                        d="M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z" />
                </svg>
            </a>
    </nav>

    <!---------------------------------------- FAQ section ----------------------------------------->
    <div class="accordion" id="accordionExample" style="margin-bottom: 5em;">
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingOne">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                    Can I set my profile picture?
                </button>
            </h2>
            <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne"
                data-bs-parent="#accordionExample">
                <div class="accordion-body">
                    <strong>Current version does not let you do this, future patch will let you set your own profile
                        picture.</strong>
                </div>
            </div>
        </div>
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingTwo">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                    Can I change my email and/or password?
                </button>
            </h2>
            <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo"
                data-bs-parent="#accordionExample">
                <div class="accordion-body">
                    <strong>Future version will integrate your facebook account to login, for better security we wont be
                        saving the
                        password on our side.</strong>
                </div>
            </div>
        </div>
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingThree">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                    Can I see a map to see carbon footprint of people around me?
                </button>
            </h2>
            <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree"
                data-bs-parent="#accordionExample">
                <div class="accordion-body">
                    <strong>Future version will be integrated with google and google maps to view that.</strong>
                </div>
            </div>
        </div>
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingFour">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseThree">
                    Can I chat with my group members?
                </button>
            </h2>
            <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour"
                data-bs-parent="#accordionExample">
                <div class="accordion-body">
                    <strong>Currently, this is the beta launch of our app. Many features
                        are still under development. We are planning to roll out diffferent features which we will alert
                        you about.</strong>
                </div>
            </div>
        </div>
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingFive">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseTwo">
                    Why isn't there more categories other than Food, Home and transport?
                </button>
            </h2>
            <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingFive"
                data-bs-parent="#accordionExample">
                <div class="accordion-body">
                    <strong>Currently we only have the major contributors of carbon emmisions in the City of
                        Vancouver.</strong>
                </div>
            </div>
        </div>
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingSix">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseSix" aria-expanded="false" aria-controls="collapseTwo">
                    I am unable to join any group
                </button>
            </h2>
            <div id="collapseSix" class="accordion-collapse collapse" aria-labelledby="headingSix"
                data-bs-parent="#accordionExample">
                <div class="accordion-body">
                    <strong>When joining a group, if you are unable to do so, you need to enter the correct name
                        of the group,
                        doing so should resolve the issue. Logging
                        in again
                        should also help. Please contact customer service or leave us some feedback if the
                        problem
                        persists.</strong>
                </div>
            </div>
        </div>
    </div>

    <!--------------------------------------- Modal for pop up message ----------------------------------->
    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel"><span id="popHeader"></span></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <span id="popBody"></span>
                </div>
                <div class="modal-footer">
                    <button id="understood" type="button" class="btn btn-primary">Ok</button>
                </div>
            </div>
        </div>
    </div>


    <!----------------------------------- Additional Feedback section ----------------------------------->
    <div Style=" width: 50%; margin: 0 auto; margin-bottom: 100px;">
        <div class="mb-3">
            <h1 class="display-4" style="text-align: center;">Need more help? Send us a message!</h1>
            <label for="TextInput" class="form-label">email (optional)</label>
            <input type="text" id="emailForm" class="form-control" placeholder="name@gmail.com">
        </div>
        <div class="mb-3">
            <label for="TextInput" class="form-label">Briefly explain the issue...</label>
            <input type="text" id="requestForm" class="form-control" placeholder="How can we help?">
        </div>
        <div class="d-grid gap-2">
            <button id="submitButton" class="btn btn-primary btn-success" type="button" data-bs-toggle="modal"
                data-bs-target="#staticBackdrop">Submit</button>
        </div>
    </div>

    <br />
    <br />
    <br />

    <!---------------------------------------------- Footer --------------------------------------------->
    <footer>
        <div id="footer-p">
            <div class="designedBy">Website designed by Team 9 for <a href="http://bcit.ca">BCIT</a> COMP 2800
                <br>
                Â© 2021 Vancouvert</div>
            <div class="moreInfo"> <a href="../html/about-us.html">About Us</a>
                <br>
                <a href="help.html" id="help-btn">
                    Help
            </div>
        </div>
    </footer>

    <!---------------------------------  Bootstrap Bundle (includes Popper) -------------------------->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous">
    </script>


    <!---------- Firebase App (the core Firebase SDK) is always required and must be listed first ----->
    <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-app.js"></script>

    <!-------------------------- Add Firebase products that you want to use --------------------------->
    <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/ui/4.6.1/firebase-ui-auth.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <!----------------------------------------- Our own scripts --------------------------------------->
    <script src="../scripts/firebase_api.js"></script>

    <script>
        //submit feedback form. 
        function feedbackSub() {
            firebase.auth().onAuthStateChanged(function (user) {
                if (user) {

                    //changes go here
                    console.log(user.uid);
                    db.collection("users").doc(user.uid)
                        .get()
                        .then(function (doc) {
                            var n = doc.data().name;
                            console.log(n);

                            document.getElementById("submitButton")
                                .addEventListener("click", function () {


                                    feedbackEmail = document.getElementById("emailForm").value;
                                    feedbackForm = document.getElementById("requestForm").value;

                                    if (feedbackForm != "") {

                                        document.getElementById("popHeader").innerText = "Submitted";
                                        document.getElementById("popBody").innerText =
                                            "Thank you for your feedback!";

                                        if (feedbackEmail == "") {

                                            db.collection("users").doc(user.uid).collection("feedback")
                                                .add({

                                                    email: "unavailable",
                                                    request: feedbackForm

                                                })

                                        } else {

                                            db.collection("users").doc(user.uid).collection("feedback")
                                                .add({

                                                email: feedbackEmail,
                                                request: feedbackForm
                                            })

                                        }

                                    } else {

                                        document.getElementById("popHeader").innerText = "Error";
                                        document.getElementById("popBody").innerText =
                                            "Please fill out request before submitting";
                                    }

                                });

                            document.getElementById("understood")
                                .addEventListener("click", function () {
                                    window.location.reload();
                                });
                        })

                } else {
                    // No user is signed in.
                }
            });
        };

        feedbackSub();
    </script>
</body>

</html>